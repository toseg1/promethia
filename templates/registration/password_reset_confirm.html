{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Set New Password - Promethia Training</title>
  <link rel="icon" type="image/x-icon" href="{% static 'img/istockphoto-503427908-612x612-logo.jpg' %}">

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- AdminLTE CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/css/adminlte.min.css">
</head>
<body class="hold-transition register-page">
<div class="register-box">
  <div class="card card-outline card-primary">
    <div class="card-header text-center">
      <a href="#" class="h1"><b>Promethia</b>.app</a>
    </div>
    <div class="card-body">
      {% if validlink %}
        <p class="login-box-msg">Enter your new password</p>
        <p class="text-muted text-sm">Please choose a strong password for your account.</p>

        {% if form.errors %}
          <div class="alert alert-danger">
            {% for field, errors in form.errors.items %}
              {% for error in errors %}
                <div>{{ error }}</div>
              {% endfor %}
            {% endfor %}
          </div>
        {% endif %}

        <form method="post">
          {% csrf_token %}
          <div class="input-group mb-3">
            <input type="password" name="new_password1" class="form-control" placeholder="New Password" required>
            <div class="input-group-append">
              <div class="input-group-text">
                <span class="fas fa-lock"></span>
              </div>
            </div>
          </div>
          <div class="input-group mb-3">
            <input type="password" name="new_password2" class="form-control" placeholder="Confirm New Password" required>
            <div class="input-group-append">
              <div class="input-group-text">
                <span class="fas fa-lock"></span>
              </div>
            </div>
          </div>
          
          <div class="alert alert-info">
            <i class="fas fa-info-circle mr-1"></i>
            <strong>Password Requirements:</strong><br>
            • At least 8 characters long<br>
            • Cannot be too similar to your personal information<br>
            • Cannot be a commonly used password<br>
            • Cannot be entirely numeric
          </div>

          <div class="row">
            <div class="col-12">
              <button type="submit" class="btn btn-primary btn-block">Set New Password</button>
            </div>
          </div>
        </form>
      {% else %}
        <div class="text-center mb-3">
          <i class="fas fa-exclamation-triangle fa-3x text-warning"></i>
        </div>
        <h4 class="text-center mb-3">Invalid Link</h4>
        <p class="login-box-msg">This password reset link is invalid or has expired</p>
        <p class="text-muted text-sm text-center">
          Password reset links expire after 24 hours for security reasons.
        </p>
        
        <div class="text-center mt-3">
          <a href="{% url 'password_reset' %}" class="btn btn-primary">Request New Reset Link</a>
        </div>
      {% endif %}

      <div class="text-center mt-3">
        <a href="{% url 'login' %}">Back to Login</a>
      </div>
    </div>
  </div>
</div>

<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/js/adminlte.min.js"></script>
</body>
</html>